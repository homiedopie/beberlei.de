<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="Blog of Benjamin Eberlei, covering a wide range of programming, bootstrapping and entrepreneurial topics">
        <meta name="viewport" content="width=device-width">
        <meta name="google-site-verification" content="mycr8JCbLYq9QcOyh4Ub1esAdN-awH9ut6nyTKUTgE4">
        <title>Page 19 &mdash; beberlei.de</title>
            <link rel="stylesheet" href="/_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="/_static/css/bootstrap.min.css" type="text/css" />
            <link rel="stylesheet" href="/_static/blog.css" type="text/css" />
            <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" />
        <link rel="shortcut icon" href="_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="_static/plugins.js"></script>
        <script src="_static/main.js"></script>
        <link rel="search" title="Search" href="search.html" /><link rel="next" title="Older" href="page20.html" /><link rel="prev" title="Newer" href="page18.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="_static/underscore.js"></script><script type="text/javascript" src="_static/doctools.js"></script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><nav class="navbar navbar-dark">
		  <div class="container">
			  <div class="navbar-header">
				  <a class="navbar-brand" href="https://beberlei.de">Benjamin Eberlei</a>
			  </div>

			  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				  <ul class="nav navbar-nav navbar-right">
						<li><a href="index.html">Home</a></li>
						<li><a href="pages/about.html">About</a></li>
						<li><a href="pages/imprint.html">Imprint</a></li>
						<li><a href="/archive.html">Archive</a></li>
					  <li><a href="/rss.xml">RSS</a></li>
				  </ul>
			  </div>
		  </div>
		</nav><div class="main-container" role="main"><div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 col-sm-12"><article role="article">
							<div class="section">
            <h1><a href="2008/06/14/exim4-and-virtual-users-forward-files.html">Exim4 and Virtual Users .forward Files</a></h1>
<p>Some days ago I began to wonder why some mails in mail account were
filtered by Exims .forward file why some are not. It took until today
that I found out what was the problem and how to fix it.</p>
<p>I implemented a virtual users/domains system for Exim using several
different documentations and tutorials. Right now some parts of my
system include the documentation on</p>
<p><a class="reference external" href="http://www.tty1.net/virtual_domains_en.html">http://www.tty1.net/virtual_domains_en.html</a></p>
<p>Now the problem is that the userforward router is only working for
accounts whose $local_part is an existing system user. I came up with
the following additional router that solves the problem. Its written for
the MySQL table layout that is specified in the Tutorial above.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/>virtualuserforward:
  debug_print = "R: virtualuserforward for $local_part@$domain"
  driver = redirect
  domains = +local_domains
  file = ${lookup mysql{SELECT CONCAT(home,'.forward') AS forward FROM users \
        WHERE id='${quote_mysql:$local_part}@${quote_mysql:$domain}'}}
  no_verify
  no_expn
  check_ancestor
  directory_transport = address_directory
  file_transport = address_file
  pipe_transport = address_pipe
  reply_transport = address_reply
  allow_filter

  user = ${lookup mysql{SELECT uid FROM users \
        WHERE id='${quote_mysql:$local_part}@${quote_mysql:$domain}'}}
  group = ${lookup mysql{SELECT gid FROM users \
        WHERE id = '${quote_mysql:$local_part}@${quote_mysql:$domain}'}}
</pre></div>
</div>
</div></blockquote>
<p>Now each virtual user is using the .forward file in its actual system
user account home directory. The next problem was: $home is not defined
in this case in the .forward file syntax: Its empty. So replacing $home
with its obvious path leads to the final solution.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/linux.html">Linux</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on June 14, 2008
                
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/06/25/multimediatreff-on-frameworks.html">Multimediatreff on Frameworks</a></h1>
<p>My neighbour gladly called my attention to the
<a class="reference external" href="http://www.multimediatreff.de">Multimediatreff</a>, a relaxed conference
that is held about three times a year, this last saturday on the topic:
Frameworks and Content-Management-Systems.</p>
<p>It was held in a very nice conference center in cologne, and from what I
heard about 200 people attended. The first two topics were on
<a class="reference external" href="http://www.joomla.org/">Joomla!</a> and barrier-free
<a class="reference external" href="http://www.typo3.org">Typo3</a>. Since I am more the framework guy, I
did not enjoy them too much. At least I got some input on how a
barrier-free website has to function. The Joomla! presentation supported
my prejudice, that programming in and for Joomla! produces ugly code.</p>
<p>I did like the presentations on frameworks, the most interesting being
the <a class="reference external" href="http://www.cakephp.org">CakePHP</a> presentation by <a class="reference external" href="http://teemow.com/">Timo
Derstappen</a>, since I haven’t looked into Cake for
about one and a half years. I have seen that with the new to come
version 2, the framework became even better, now supporting easy code
generation and flexible site generation. But its still somehow a Ruby
clone and forces me too much in my programming style.</p>
<p>The <a class="reference external" href="http://framework.zend.com">Zend Framework</a> presentation was done
by Carsten Möhrke, who also wrote the first german ZF Book. He showed
the creation of a blog using Zend Framework, being the Hello World
example for frameworks. He specifically showed, that you can use
anything you want as a model, a Zend_Db_Table object or any other
object. He also showed something like a Data-Mapper pattern in his
application. I got some ideas from this I probably will write about some
later time.</p>
<p>I also enjoyed the <a class="reference external" href="http://www.rubyonrails.de">Rails</a> presentation,
because I never got the chance to look the Ruby guys at work of the
shoulder. But this is even worse than CakePHP was my first observation.
I am no fan of ActiveRecord being forced upon you as Model
implementation.</p>
<p>The pizza battle, mysteriously announced by the host, was another
highlight, as well as the drinks and snacks in between. All in all I can
highly recommend the Multimediatreff for the next time.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/conferences.html">Conferences</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on June 25, 2008
                
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/06/22/zf-caching-pages-via-front-controller-plugin.html">ZF: Caching Pages via Front Controller Plugin</a></h1>
<p>Today I implemented caching using a front controller plugin (<a class="reference external" href="http://devzone.zend.com/article/3372">see
Matthews post on Zend Devzone</a>)
into the Whitewashing blog software via Zend_Cache and the Filesystem
Backend. I ran some superficial Apache Benchmark tests to have a look
at the gain change in performance.</p>
<p>First of all i used the complete Plugin from <a class="reference external" href="http://devzone.zend.com/article/3372">Matthews article on Zend
Devzone</a> and a missing function
getCache() in the code fragment:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/>public function getCache()
{
    if( ($response = $this-&gt;cache-&gt;load($this-&gt;key)) != false) {
        return $response;
    }
    return false;
}
</pre></div>
</div>
</div></blockquote>
<p>I loaded the Plugin into the front controller and initialized it with a
Zend_Config_Ini object. This all works very smoothly and caching is
ready to begin.</p>
<p>Testing came to the result that with 1000 requests, 10 of them concurrent
(ab -n 1000 -c 10), which I know is a rather unrealistic assumption for
this blog, the request time dropped by half, from six to three seconds
(still lot of time, but this isn’t the best webserver).</p>
<div class="section" id="results-without-caching">
<h2>Results without caching</h2>
<div class="highlight-default"><div class="highlight"><pre><span/><span class="n">Requests</span> <span class="n">per</span> <span class="n">second</span><span class="p">:</span>    <span class="mf">1.49</span> <span class="p">[</span><span class="c1">#/sec] (mean)</span>
<span class="n">Time</span> <span class="n">per</span> <span class="n">request</span><span class="p">:</span>       <span class="mf">6695.213</span> <span class="p">[</span><span class="n">ms</span><span class="p">]</span> <span class="p">(</span><span class="n">mean</span><span class="p">)</span>

<span class="n">Connection</span> <span class="n">Times</span> <span class="p">(</span><span class="n">ms</span><span class="p">)</span>
              <span class="nb">min</span>  <span class="n">mean</span><span class="p">[</span><span class="o">+/-</span><span class="n">sd</span><span class="p">]</span> <span class="n">median</span>   <span class="nb">max</span>
<span class="n">Connect</span><span class="p">:</span>       <span class="mi">26</span>   <span class="mi">30</span>   <span class="mf">4.0</span>     <span class="mi">30</span>      <span class="mi">43</span>
<span class="n">Processing</span><span class="p">:</span>  <span class="mi">1556</span> <span class="mi">6452</span> <span class="mf">3372.1</span>   <span class="mi">5511</span>   <span class="mi">14768</span>
<span class="n">Waiting</span><span class="p">:</span>     <span class="mi">1436</span> <span class="mi">6129</span> <span class="mf">3174.1</span>   <span class="mi">5145</span>   <span class="mi">14595</span>
<span class="n">Total</span><span class="p">:</span>       <span class="mi">1583</span> <span class="mi">6483</span> <span class="mf">3373.2</span>   <span class="mi">5538</span>   <span class="mi">14810</span>
</pre></div>
</div>
</div>
<div class="section" id="results-with-caching">
<h2>Results with caching</h2>
<div class="highlight-default"><div class="highlight"><pre><span/><span class="n">Requests</span> <span class="n">per</span> <span class="n">second</span><span class="p">:</span>    <span class="mf">3.03</span> <span class="p">[</span><span class="c1">#/sec] (mean)</span>
<span class="n">Time</span> <span class="n">per</span> <span class="n">request</span><span class="p">:</span>       <span class="mf">3304.534</span> <span class="p">[</span><span class="n">ms</span><span class="p">]</span> <span class="p">(</span><span class="n">mean</span><span class="p">)</span>

<span class="n">Connection</span> <span class="n">Times</span> <span class="p">(</span><span class="n">ms</span><span class="p">)</span>
              <span class="nb">min</span>  <span class="n">mean</span><span class="p">[</span><span class="o">+/-</span><span class="n">sd</span><span class="p">]</span> <span class="n">median</span>   <span class="nb">max</span>
<span class="n">Connect</span><span class="p">:</span>       <span class="mi">26</span>   <span class="mi">31</span>   <span class="mf">6.3</span>     <span class="mi">30</span>      <span class="mi">73</span>
<span class="n">Processing</span><span class="p">:</span>   <span class="mi">781</span> <span class="mi">3214</span> <span class="mf">1757.7</span>   <span class="mi">3103</span>    <span class="mi">7445</span>
<span class="n">Waiting</span><span class="p">:</span>      <span class="mi">650</span> <span class="mi">3055</span> <span class="mf">1731.4</span>   <span class="mi">2928</span>    <span class="mi">7190</span>
<span class="n">Total</span><span class="p">:</span>        <span class="mi">809</span> <span class="mi">3245</span> <span class="mf">1757.8</span>   <span class="mi">3135</span>    <span class="mi">7475</span>
</pre></div>
</div>
<p>As said before this testing is superficial, but its gives a broad sense
of what performance gain is possible with just some lines of code and a
temporary directory. Using memcache will probably speed up the process
another good amount.</p>
<p>Later I realized that complete page caching (rather than block element
caching) sucks when you inject admin area links into the navigation,
which would allow non-logged in users to see parts of the admin area so
I had to disable caching totally. You never know in the first place (you
should though). I have to rework my admin area or extend my
authentication or the caching plugin somehow. This will probably be the
topic another time.</p>
</div>


            
            <div class="tags">
                More about: 
                <a href="tags/zendframework.html">ZendFramework</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on June 22, 2008
                
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/06/21/on-frameworks-and-javascript-coupling.html">On Frameworks and Javascript Coupling</a></h1>
<p><a class="reference external" href="http://www.zend.com">Zend</a> announced they work together with the
<a class="reference external" href="http://www.dojotoolkit.org">Dojo Team</a> to integrate Javascript
support into the Zend Framework. What this actually means is that you
can write your Javascript Code in PHP if you’re javascript library of
choice is Dojo.</p>
<p>Since Dojo is not my library of choice I would have to write a JQuery
View Helper on my own or wait until somebody else releases one.</p>
<p>But why not write javascript? Its very easy with all those libraries and
addresses most cross browser incompatibilities: <a class="reference external" href="http://www.b-list.org/weblog/2006/jul/02/django-and-ajax/">One
Django</a>,
<a class="reference external" href="http://www.builtfromsource.com/2006/12/20/does-ajax-have-a-place-in-the-application-framework/">one Zend Framework
developer</a>
argue framework and javascript coupling is not the way to go based on
the arguments that its breaks the MVC pattern, leads to function calls
equal to those in javascript in its framework respective language, and
that javascript is actually something any good webdeveloper should be
able to program, even when its just using library components.</p>
<p>Using <a class="reference external" href="http://jquery.com">JQuery</a> without any help from tools for
about a year now I can say there are still those days where javascript
drives me mad, but most of the time I its working perfect. Since Ajax
related calls like GET, POST, and FORM stuff are oneliners I don’t see
why one would need tighter integration of JS and frameworks.</p>
<p>Larger Javascript components like Popup Calendars, Autocomplete and the
like are harder to integrate than in Rails or cakePHP, but thinking
about the problem a little longer leads to powerful reusable solutions,
that save time on integration after the first initial setup.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/zendframework.html">ZendFramework</a>
                 / 
                <a href="tags/javascript.html">Javascript</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on June 21, 2008
                
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/06/21/simplifying-zf-scope-of-variables-in-view-and-controller.html">Simplifying ZF: Scope of Variables in View and Controller</a></h1>
<p>As a follow up on the <a class="reference external" href="http://destiney.com/blog/zend-framework-web-2-0-framework-my-ass">Zend Framework, “Web 2.0 Framework” My
Ass!</a>
article referenced earlier I came up with some simplifications of the Zend
View and Controller variable coupling.</p>
<p>Using some code in the article I created a new Zend_View_Extended
class which offers the possibility to circumvent the access of variables
via $this and directly registers each variable key of the Zend_View
object as an own variable in the script template:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/>class Zend_View_Extended extends Zend_View_Abstract
{
    protected function _run()
    {
        while( list( $k, $v ) = each( $this ) ) ${$k} = $v;

        include func_get_arg(0);
    }
}
</pre></div>
</div>
</div></blockquote>
<p>Now rather than calling $this-&gt;data you can call $data in a script
template. Of course this comes with additional overhead of each variable
being registered twice. I don’t know how this handles performance wise,
but maybe unsetting $this variables after copying solves this. Also you
have to overwrite the initView() method of your base Controller Action
class.</p>
<p>Another simplification would be to allow for the following direct
variable settings in any Controller Action, which would shorten the
$this-&gt;view-&gt;variable call, to derive the same functionality via
$this-&gt;variable. I haven’t tested this though.</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/>class Zend_Controller_SimpleAction extends Zend_Controller_Action
{
    function __set($name, $value)
    {
        $this-&gt;view-&gt;{$name} = $value;
    }
}
</pre></div>
</div>
</div></blockquote>


            
            <div class="tags">
                More about: 
                <a href="tags/zendframework.html">ZendFramework</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on June 21, 2008
                
            </small>
        </p>
    </div>
        </div><div class="archive_link">
        <a href="archive.html">Archive</a>
    </div></article></div> <!-- #main -->
				</div>
			</div></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo">
			<div class="container">
				<div class="col-md-8 col-md-offset-2">
					<div class="footer">
						<small>© Copyright 2008-2018, Benjamin Eberlei.</small>
					</div>
				</div>
			</div>
        </div> <!-- footer-container -->
      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-32146757-1', 'auto');
          ga('send', 'pageview');
        </script>

    </body>
</html>
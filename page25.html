<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="Blog of Benjamin Eberlei, covering a wide range of programming, bootstrapping and entrepreneurial topics">
        <meta name="viewport" content="width=device-width">
        <meta name="google-site-verification" content="mycr8JCbLYq9QcOyh4Ub1esAdN-awH9ut6nyTKUTgE4">
        <title>Page 25 &mdash; beberlei.de</title>
            <link rel="stylesheet" href="/_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="/_static/css/bootstrap.min.css" type="text/css" />
            <link rel="stylesheet" href="/_static/blog.css" type="text/css" />
            <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" />
        <link rel="shortcut icon" href="_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="_static/plugins.js"></script>
        <script src="_static/main.js"></script>
        <link rel="search" title="Search" href="search.html" /><link rel="next" title="Older" href="page26.html" /><link rel="prev" title="Newer" href="page24.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="_static/underscore.js"></script><script type="text/javascript" src="_static/doctools.js"></script><script type="text/javascript" src="_static/disqus.js"></script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><nav class="navbar navbar-dark">
		  <div class="container">
			  <div class="navbar-header">
				  <a class="navbar-brand" href="https://beberlei.de">Benjamin Eberlei</a>
			  </div>

			  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				  <ul class="nav navbar-nav navbar-right">
						<li><a href="index.html">Home</a></li>
						<li><a href="pages/about.html">About</a></li>
						<li><a href="/archive.html">Archive</a></li>
					  <li><a href="/rss.xml">RSS</a></li>
				  </ul>
			  </div>
		  </div>
		</nav><div class="main-container" role="main"><div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 col-sm-12"><article role="article">
							<div class="section">
            <h1><a href="2008/04/27/ox-cross-correlation-coefficients-with-lags.html">Ox: Cross-correlation coefficients with lags</a></h1>
<p>Working on the homework for my <a class="reference external" href="http://mueller.gernot.googlepages.com/monetaryeconomics">Monetary Economics
class</a> I
realized that <a class="reference external" href="http://www.doornik.com">Ox</a> has different mechanisms to
calculate correlation coefficients like Mathlab has.</p>
<p>Our assignment was to replicate the Dynamic Correlations graph in
<a class="reference external" href="http://www.amazon.de/gp/redirect.html?ie=UTF8&amp;location=http://www.amazon.de/Monetary-Theory-Policy-Carl-Walsh/dp/0262232316?ie=UTF8&amp;s=books-intl-de&amp;qid=1209289935&amp;sr=8-1&amp;site-redirect=de&amp;tag=economystuden-21&amp;linkCode=ur2&amp;camp=1638&amp;creative=6742">Walshs’ Monetary Theory and
Policy</a>
for European Data, which shows the cross-correlation of different
monetary aggregates (M0,M1,M2) with GDP over lagging periods of -8 to +8
quarters.</p>
<p>What was missing for me to do that assignment in Ox was a function to
calculate cross-correlation coefficients for two vectors for a specified
lag length:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/><span class="c1">#include &lt;oxfloat.h&gt;</span>

<span class="o">/**</span>
 <span class="o">*</span> <span class="n">Computes</span> <span class="n">the</span> <span class="n">cross</span><span class="o">-</span><span class="n">correlation</span> <span class="n">coefficient</span> <span class="k">for</span> <span class="n">two</span> <span class="n">vector</span> <span class="n">series</span> <span class="n">allowing</span>
 <span class="o">*</span> <span class="n">to</span> <span class="n">optionally</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">positive</span> <span class="ow">and</span> <span class="n">negative</span> <span class="n">lags</span> <span class="n">the</span> <span class="n">ccc</span>
 <span class="o">*</span> <span class="n">should</span> <span class="n">be</span> <span class="n">calculated</span> <span class="k">for</span><span class="o">.</span>
 <span class="o">*</span>
 <span class="o">*</span> <span class="nd">@author</span> <span class="n">Benjamin</span> <span class="n">Eberlei</span> <span class="p">(</span><span class="n">kontakt</span> <span class="n">at</span> <span class="n">beberlei</span> <span class="n">dot</span> <span class="n">de</span><span class="p">)</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">vVarY</span> <span class="n">Tx1</span> <span class="n">vector</span> <span class="n">of</span> <span class="n">variable</span> <span class="n">related</span> <span class="n">to</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">vVarX</span> <span class="n">Tx1</span> <span class="n">vector</span> <span class="n">of</span> <span class="n">variable</span> <span class="n">which</span> <span class="ow">is</span> <span class="n">tested</span> <span class="ow">in</span> <span class="n">different</span> <span class="n">lags</span>
 <span class="o">*</span> <span class="nd">@param</span> <span class="n">lags</span> <span class="n">Integer</span> <span class="n">indicating</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">negative</span> <span class="ow">and</span> <span class="n">positive</span> <span class="n">lags</span><span class="o">.</span>
 <span class="o">*</span> <span class="nd">@returns</span> <span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">lags</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mi">1</span> <span class="n">vector</span> <span class="n">of</span> <span class="n">correlations</span> <span class="kn">from</span> <span class="o">-</span><span class="n">lags</span> <span class="n">to</span> <span class="n">lags</span>
 <span class="o">**/</span>
<span class="n">ccf</span><span class="p">(</span><span class="n">const</span> <span class="n">vVarY</span><span class="p">,</span> <span class="n">const</span> <span class="n">vVarX</span><span class="p">,</span> <span class="n">const</span> <span class="n">lags</span><span class="p">)</span>
<span class="p">{</span>
    <span class="o">//</span> <span class="n">Generate</span> <span class="n">positive</span> <span class="ow">and</span> <span class="n">negative</span> <span class="n">lags</span> <span class="n">of</span> <span class="n">given</span> <span class="n">length</span> <span class="ow">and</span> <span class="n">fill</span> <span class="k">with</span> <span class="n">NaN</span><span class="p">,</span> <span class="n">so</span>
    <span class="o">//</span> <span class="n">that</span> <span class="n">rows</span> <span class="k">with</span> <span class="ow">not</span> <span class="n">available</span> <span class="n">numbers</span> <span class="n">can</span> <span class="n">be</span> <span class="n">dropped</span> <span class="kn">from</span> <span class="nn">calculating</span> <span class="n">the</span> <span class="n">CCF</span> <span class="n">later</span> <span class="n">on</span><span class="o">.</span>
    <span class="n">decl</span> <span class="n">mXLag</span> <span class="o">=</span> <span class="n">lag0</span><span class="p">(</span><span class="n">vVarX</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="n">lags</span><span class="p">,</span> <span class="o">-</span><span class="n">lags</span><span class="p">),</span> <span class="n">M_NAN</span><span class="p">);</span>

    <span class="n">decl</span> <span class="n">mCorr</span><span class="p">,</span> <span class="n">sCov</span><span class="p">;</span>

    <span class="o">//</span> <span class="n">initialize</span> <span class="n">result</span> <span class="n">vector</span> <span class="n">holding</span> <span class="n">one</span> <span class="n">crosscorrelation</span> <span class="n">per</span> <span class="n">lag</span>
    <span class="n">decl</span> <span class="n">vCorrLags</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">lags</span><span class="o">*</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>

    <span class="o">//</span> <span class="n">sadly</span> <span class="n">there</span> <span class="n">are</span> <span class="n">no</span> <span class="n">matrix</span> <span class="n">operations</span> <span class="n">to</span> <span class="n">ease</span> <span class="n">this</span> <span class="n">computation</span><span class="p">,</span> <span class="n">loop</span> <span class="n">over</span> <span class="nb">all</span> <span class="n">lags</span>
    <span class="k">for</span><span class="p">(</span><span class="n">decl</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="o">+</span><span class="n">lags</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">mCorr</span> <span class="o">=</span> <span class="n">deleter</span><span class="p">(</span><span class="n">vVarY</span> <span class="o">~</span> <span class="n">mXLag</span><span class="p">[][</span><span class="n">i</span><span class="p">]);</span> <span class="o">//</span> <span class="n">stick</span> <span class="n">y</span> <span class="ow">and</span> <span class="n">current</span> <span class="n">lagged</span> <span class="n">x</span> <span class="n">together</span> <span class="ow">and</span> <span class="n">delete</span> <span class="n">NaN</span> <span class="n">rows</span>

        <span class="o">//</span> <span class="n">calculate</span> <span class="n">covariance</span> <span class="n">of</span> <span class="n">both</span> <span class="n">time</span> <span class="n">series</span>
        <span class="n">sCov</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">rows</span><span class="p">(</span><span class="n">mCorr</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">sumc</span><span class="p">(</span> <span class="p">(</span><span class="n">mCorr</span><span class="p">[][</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">meanc</span><span class="p">(</span><span class="n">mCorr</span><span class="p">[][</span><span class="mi">0</span><span class="p">]))</span><span class="s1">' * (mCorr[][1]-meanc(mCorr[][1])) );</span>

        <span class="o">//</span> <span class="n">calculate</span> <span class="n">correlation</span> <span class="n">coefficient</span>
        <span class="n">vCorrLags</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sCov</span> <span class="o">/</span> <span class="p">(</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">varc</span><span class="p">(</span><span class="n">mCorr</span><span class="p">[][</span><span class="mi">0</span><span class="p">]))</span> <span class="o">*</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">varc</span><span class="p">(</span><span class="n">mCorr</span><span class="p">[][</span><span class="mi">1</span><span class="p">]))</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">vCorrLags</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>It may prove useful to someone.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/ox.html">Ox</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on April 27, 2008
                 by beberlei <kontakt@beberlei.de>
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/09/05/jquery-component-approved-for-extras-library.html">jQuery Component approved for extras library</a></h1>
<p>Yesterday both my jQuery Helper proposals (<a class="reference external" href="http://framework.zend.com/wiki/display/ZFPROP/ZendX_JQuery_View_Helper_JQuery+-+Benjamin+Eberlei">Core
Helper</a>,
<a class="reference external" href="http://framework.zend.com/wiki/display/ZFPROP/ZendX_JQuery+UI+Widgets+Extension+-+Benjamin+Eberlei?focusedCommentId=7373203#comment-7373203">UI
Widgets</a>)
for the Zend Framework have been accepted for development. I have
already checked my working prototypes <a class="reference external" href="http://framework.zend.com/svn/framework/extras/incubator/">into the Zend Framework
SVN</a>. In my
opinion the usage is quite stable already. There is likely to be no
argument flip, function renaming or whatsoever. I have renamed the
jqLink helper to ajaxLink though, because other libraries are offering
the same functionality to make Ajax related calls and this way the
learning curve for people using different libraries in different
projects may be more easy.</p>
<p>What is still missing? I have to add captureStart()/captureEnd()
functions to the Container Widgets Accordion and Tabs, and will create
additional pane helpers for both of them. This will likely be finished
this weekend and then there is only the documentation missing. I am very
confident this component will be finished for the Zend Framework 1.7
release later this year.</p>
<p>Since this component also includes helpers for the jQuery UI Widgets 1.6
release (which is not released yet), a little waiting time before
release is still good. I hope this all works out and the jQuery UI 1.6
release is in the Google CDN, when ZF 1.7 comes out.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/zendframework.html">ZendFramework</a>
                 / 
                <a href="tags/jquery.html">jQuery</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on September 05, 2008
                
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/09/11/new-calypso-dtl-version-0-2.html">New Calypso DTL Version 0.2</a></h1>
<p>I have got some hints about bugs and optimized the performance of loops
a little bit, so that you can now <a class="reference external" href="http://www.beberlei.de/sources/calypso-dtl-0.2.tar.gz">download version
0.2</a> of the
<a class="reference external" href="http://www.beberlei.de/calypso">Calypso DTL template engine</a>. Have
fun.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/calypsolibrary.html">CalypsoLibrary</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on September 11, 2008
                
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/09/20/dependency-injection-via-interface-in-php-an-example.html">Dependency Injection via Interface in PHP: An example</a></h1>
<p>Personal projects and work currently both force me to think about
application design and I <a class="reference external" href="http://www.martinfowler.com/articles/injection.html">came across dependency
injection</a> the
other day. Its quite a complex Design Pattern and hard to grasp, even
with the number of examples you can find in the internet. Basically
Dependency Injection means you register components that might be a
dependency for other components and when loading new classes via the
dependency injection framework, it knows of this relationships and
assembles the object in need and all its dependencies and returns them
fully initialized. This pattern leads to completely encapsulated objects
where any class in the object graph can be exchanged for a new
implementation without breaking all its dependencies. It also makes
testing complex components and object relationships very easy.</p>
<p>As far as I could find out, three different types of Dependency Injection
implementations exist: Via Constructor, via Setter and via Interfaces.
There exist implementations of Dependency Injection for Java (Spring)
that are configured via XML config files and seem very complex. They are
also hard to read in code I presume, since you always have to be aware
of the current application configuration. There are also some more
lightweight implementations (PicoContainer) that assemble their
relationships in the application and work with config methods that act
as configuration of the dependencies. <a class="reference external" href="http://www.martinfowler.com/articles/injection.html">Martin Folwer also discusses an
implementation via
interfaces</a>,
which seems most accessible for me.</p>
<p>All PHP clones of any dependency injection framework seem to go the
complex way via configuration though. With traits and multiple class
inheritance on the horizon, some kind of interface injection seems
mighty powerful though. So I implemented a really lightweight
implementation of Interface Dependency Injection for PHP. The Container
works with static method only, is therefore in the global scope, such
that configuration is reduced to a minimum. Generally you have to write
interfaces for object injection, for example:</p>
<div class="highlight-php"><div class="highlight"><pre><span/><span class="x">interface InjectDbAdapter</span>
<span class="x">{</span>
<span class="x">    public function injectDbAdapter(Zend_Db_Adapter_Abstract $db);</span>
<span class="x">}</span>
</pre></div>
</div>
<p>Other potential examples include “InjectLogger”, “InjectSoapClient”, or
“InjectAppConfig”. You then have to register a component for usage with
this interface:</p>
<div class="highlight-php"><div class="highlight"><pre><span/><span class="x">Whitewashing_Container::registerComponent('InjectDbAdapter', Zend_Db::factory($dbConfig));</span>
</pre></div>
</div>
<p>Now any class that implements the InjectDbAdapter interface can be
instantiated via:</p>
<div class="highlight-php"><div class="highlight"><pre><span/><span class="x">$obj = Whitewashing_Container::load('Class');</span>
</pre></div>
</div>
<p>and the loader takes care of calling the ‘Class’ implementation of
injectDbAdapter with the given Database Adapter. A negative consequence
of this approach is that you have to implement the inject methods for
all interfaces in your concrete class implementations. With Traits
(multiple class inheritance) being a new feature in PHP soon, injection
via parent classes seems to become a very powerful approach though,
which can handle the concrete implementations.</p>
<p>The Container takes care of all the dependency building, so when testing
your components you can register lots of mock objects. You can also
exchange dependencies for only a subset of objects very easily. I
implemented a method “Whitewashing_Container::registerClassComponent”,
which registers a dependency component that is used with higher priority
in construction of the given class. You can also specify a third
parameter $localInterfaceOverride for the highest priority:</p>
<div class="highlight-php"><div class="highlight"><pre><span/><span class="x">$obj = Whitewashing_Container::load('Class', null, array('InjectDbAdapter' =&gt; $newDbAdapter));</span>
</pre></div>
</div>
<p>Speedwise the usage of the Container reduces class instantiation by about
50%, from 0.5 sec for 10000 classes with setting dependencies to 1 sec
on my machine. But naturally only classes with dependencies and lots of
them should be using this mechanism and with good application design,
this shouldn’t be to many. You can download
<a class="reference external" href="http://www.beberlei.de/sources/WhitewashingContainer.phps">Container</a>
and <a class="reference external" href="http://www.beberlei.de/sources/di.phps">Example</a> sourcecode, to
take a look. Currently this Container is not really creating new
dependencies for each new class generation but rather inverts the usage
of a registry. It should be an easy task to extend the registering
method to decide between new class generation and using the globally
registered class instance.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/dependencyinjection.html">DependencyInjection</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on September 20, 2008
                
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2008/12/30/dependency-injection-with-php-introducing-sphicy.html">Dependency Injection with PHP: Introducing Sphicy</a></h1>
<p>I have written <a class="reference external" href="http://www.whitewashing.de/blog/articles/101">on dependency
injection</a> before
christmas and how <a class="reference external" href="http://code.google.com/p/guice">Guice</a>, googles DI
framework, offers a simple solution. I copied the functionality for a
PHP clone of Guice and named it
<a class="reference external" href="http://www.beberlei.de/sphicy">Sphicy</a>. You saw an early prototype of
it in the blogpost mentioned above.</p>
<p><a class="reference external" href="http://www.beberlei.de/sphicy">Sphicy</a> configures object dependencies
with modules: You explicitly state which implementation should be bound
to which interface. An injector then creates instances of these objects
via reflection: All constructor dependencies are resolved by looking at
the given type hints and initializes those according to the specified
bindings.</p>
<p>Two examples included in the <a class="reference external" href="http://www.beberlei.de/dev/svn/sphicy/">source code of
Sphicy</a> are <a class="reference external" href="http://framework.zend.com">Zend
Framework</a> and
<a class="reference external" href="http://www.ezcomponents.org">ezComponents</a> MVC bootstrapping modules.
Sadly both frameworks default front controllers are engineered in such a
way that useful dependency injection needs some workarounds.</p>
<p>As an example I will now discuss the Sphicy Module for Zend Framework
MVC applications. To circumvent the singleton and protected Constructor
of Zend_Controller_Front, we have to build a new front controller that
wraps around it and requires all the dependencies:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/>class Sphicy_Controller_Front
{
    protected $front;

    /**
     * Create Front Controller for Zend Framework using explicitly dependencies created by Sphicy.
     *
     * @param Zend_Controller_Request_Abstract      $request
     * @param Zend_Controller_Response_Abstract     $response
     * @param Zend_Controller_Router_Interface      $router
     * @param Zend_Controller_Dispatcher_Interface  $dispatcher
     */
    public function __construct(
        Zend_Controller_Request_Abstract $request,
        Zend_Controller_Response_Abstract $response,
        Zend_Controller_Router_Interface $router,
        Zend_Controller_Dispatcher_Interface $dispatcher=null
    )
    {
        $front = Zend_Controller_Front::getInstance();
        $front-&gt;setRequest($request);
        $front-&gt;setResponse($response);
        $front-&gt;setRouter($router);

        if($dispatcher === null) {
            $dispatcher = $front-&gt;getDispatcher();
        }
        $front-&gt;setDispatcher($dispatcher);
    }

    public function dispatch()
    {
        $this-&gt;front-&gt;dispatch();
    }
}
</pre></div>
</div>
</div></blockquote>
<p>You can see that the <strong>Sphicy_Controller_Front</strong> class requires
dependencies in its constructor that are then forward injected into
<strong>Zend_Controller_Front</strong>. You can now create a module that binds all
the required dependencies to concrete implementations, for example a
module for a Zend MVC Http Application might look like:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/>class Sphicy_ZendMvc_ExampleModule implements spModule {
     public function configure(spBinder $binder) {
         // Sphicy_Controller_Front does not extend Zend_Controller_Front, because of Singletonitis
         // It offers the dispatch method to proxy against Zend_Controller_Front::dispatch.
         $binder-&gt;bind("Sphicy_Controller_Front")-&gt;to("Sphicy_Controller_Front");
         $binder-&gt;bind("Zend_Controller_Request_Abstract")-&gt;to("Zend_Controller_Request_Http");
         $binder-&gt;bind("Zend_Controller_Response_Abstract")-&gt;to("Zend_Controller_Response_Http");
         // loads all routes
         $binder-&gt;bind("Zend_Controller_Router_Interface")-&gt;to("MyApplication_Router");
     }
 }
</pre></div>
</div>
</div></blockquote>
<p>The class <strong>MyApplication_Router</strong> might look up all the routing
information of the application via a hardcoded configuration mechanism.
You may say this is a hard dependency, but actually you can just switch
modules or implementations at this position to replace the router with
another implementation. You can also see that no implementation for the
dispatcher is bound. But this dependency is optional and will be created
automatically as can be seen in the <strong>Sphicy_Controller_Front</strong> class.</p>
<p>The front controllers is now created by calling:</p>
<blockquote>
<div><div class="highlight-default"><div class="highlight"><pre><span/>$injector = new spDefaultInjector(new Sphicy_ZendMvc_ExampleModule());
$front = $injector-&gt;getInstance("Sphicy_Controller_Front");
$front-&gt;dispatch();
</pre></div>
</div>
</div></blockquote>
<p>What happens in the <strong>$injector-&gt;getInstance()</strong> line? Sphicy looks at
<strong>Sphicy_Controller_Front</strong>‘s constructor and finds that four
dependencies are needed: Request, Response, Router and Dispatcher
implementations. It looks up the bindings and searches for them,
creating Zend_Controller_Request_Http,
Zend_Controller_Response_Http and MyApplication_Router objects. A
dispatcher implementation is not found, but Sphicy recognizes that null
is a valid paramater and injects it. The 3 concrete implementations and
one null are instantiated and used to construct a valid
<strong>Sphicy_Controller_Front</strong> instance.</p>
<p>You have now stated the dependencies of the Zend Controller Front
explicitly and can switch them instantaneously by switching the bindings
of interface to implementations in the configuration module.</p>
<p>Have a look at the <a class="reference external" href="http://www.beberlei.de/sphicy">Sphicy Website</a> and
<a class="reference external" href="http://www.beberlei.de/sphicy/documentation/faq.html">FAQ</a> to see
more examples and information about the possibilites of this dependency
injection framework.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/dependencyinjection.html">DependencyInjection</a>
                 / 
                <a href="tags/sphicylibrary.html">SphicyLibrary</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on December 30, 2008
                
            </small>
        </p>
    </div>
        </div><div class="archive_link">
        <a href="archive.html">Archive</a>
    </div></article></div> <!-- #main -->
				</div>
			</div></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo">
			<div class="container">
				<div class="col-md-8 col-md-offset-2">
					<div class="footer">
						<small>© Copyright 2008-2017, Benjamin Eberlei.</small>

						<script type="text/javascript">    var disqus_shortname = "whitewashing";    disqus_count();</script>
					</div>
				</div>
			</div>
        </div> <!-- footer-container -->
      </div> <!--! end of #container --><script type="text/javascript">    var disqus_shortname = "whitewashing";    disqus_count();</script><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>
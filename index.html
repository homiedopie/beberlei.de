<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="Blog of Benjamin Eberlei, covering a wide range of programming, bootstrapping and entrepreneurial topics">
        <meta name="viewport" content="width=device-width">
        <meta name="google-site-verification" content="mycr8JCbLYq9QcOyh4Ub1esAdN-awH9ut6nyTKUTgE4">
        <title>Home &mdash; beberlei.de</title>
            <link rel="stylesheet" href="/_static/pygments.css" type="text/css" />
            <link rel="stylesheet" href="/_static/css/bootstrap.min.css" type="text/css" />
            <link rel="stylesheet" href="/_static/blog.css" type="text/css" />
            <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" />
        <link rel="shortcut icon" href="_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="_static/plugins.js"></script>
        <script src="_static/main.js"></script>
        <link rel="search" title="Search" href="search.html" /><link rel="next" title="Older" href="page2.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        SOURCELINK_SUFFIX: '.txt',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="_static/underscore.js"></script><script type="text/javascript" src="_static/doctools.js"></script><script type="text/javascript" src="_static/language_data.js"></script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container"><nav class="navbar navbar-dark">
		  <div class="container">
			  <div class="navbar-header">
				  <a class="navbar-brand" href="https://beberlei.de">Benjamin Eberlei</a>
			  </div>

			  <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				  <ul class="nav navbar-nav navbar-right">
						<li><a href="#">Home</a></li>
						<li><a href="pages/about.html">About</a></li>
						<li><a href="pages/imprint.html">Imprint</a></li>
						<li><a href="/archive.html">Archive</a></li>
					  <li><a href="/rss.xml">RSS</a></li>
				  </ul>
			  </div>
		  </div>
		</nav><div class="main-container" role="main"><div class="container">
				<div class="row">
					<div class="col-md-8 col-md-offset-2 col-sm-12"><article role="article">
							<div class="section">
            <h1><a href="2019/01/05/integrate_ansible_vault_with_1password_commandline.html">Integrate Ansible Vault with 1Password Commandline</a></h1>
<p>We are using Ansible to provision and deploy Tideways in development and
production and the Ansible Vault feature to unlock secrets on production.
Since we recently introduced 1Password I integrated them both and unlock the
Ansible Vault using 1Password.</p>
<p>This way we can centrally change the Ansible Vault password regularly, without
any of the developers with access to production/deployment needing to know the
actual password.</p>
<p>To make this integration work, you can setup 1Password CLI to query your
1Password vault for secrets after logging in with password and two factor
token.</p>
<p>Then you only need a bash script to act as an executable <a class="reference external" href="https://docs.ansible.com/ansible/latest/user_guide/vault.html#providing-vault-passwords">Ansible Vault
password file</a>.</p>
<p>First, <a class="reference external" href="https://support.1password.com/command-line-getting-started/">download and install</a> the 1Password
CLI according to their documentation.</p>
<p>Next, you need to login with your 1Password account explicitly passing email,
domain and secret key, so that the CLI can store this information in a
configuration file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span/>$ op signin example.1password.com me@example.com
Enter the Secret Key for me@example.com at example.1password.com: A3-**********************************
Enter the password for me@example.com at example.1password.com:
Enter your six-digit authentication code: ******
</pre></div>
</div>
<p>After this one-time step, you can login more easily by just specifiying <span class="docutils literal"><span class="pre">op</span>
<span class="pre">signin</span> <span class="pre">example</span></span>, so I create an alias for this in <span class="docutils literal"><span class="pre">~.bash_aliases</span></span> (I am on
Ubuntu).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span/><span class="n">alias</span> <span class="n">op</span><span class="o">-</span><span class="n">signin</span><span class="o">=</span><span class="s1">'eval $(op signin example)'</span>
<span class="n">alias</span> <span class="n">op</span><span class="o">-</span><span class="n">logout</span><span class="o">=</span><span class="s1">'op signout &amp;&amp; unset OP_SESSION_example'</span>
</pre></div>
</div>
<p>The eval line makes sure that an environment variable <span class="docutils literal"><span class="pre">OP_SESSION_example</span></span> is
set for this terminal/shell only with temporary access to your 1Password vault
in subsequent calls to the <span class="docutils literal"><span class="pre">op</span></span> command. You can use <span class="docutils literal"><span class="pre">op-logout</span></span> alias to
invalidate this session and logout.</p>
<p>Then I create the bash script in <span class="docutils literal"><span class="pre">/usr/local/bin/op-vault</span></span> that is used as
Ansible Vault Password File. It needs to fetches the secret and print it to the
screen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span/>#!/bin/bash
VAULT_ID="1234"
VAULT_ANSIBLE_NAME="Ansible Vault"
op get item --vault=$VAULT_ID "$VAULT_ANSIBLE_NAME" |jq '.details.fields[] | select(.designation=="password").value' | tr -d '"'
</pre></div>
</div>
<p>This one liner uses the command <span class="docutils literal"><span class="pre">jq</span></span> to slice the JSON output to print only
the password. The <span class="docutils literal"><span class="pre">tr</span></span> command trims the double quotes around the password.</p>
<p>Make sure to configure the <span class="docutils literal"><span class="pre">VAULT_ID</span></span> and <span class="docutils literal"><span class="pre">VAULT_ANSIBLE_NAME</span></span> variables to
point to the ID of your vault where the secret is stored in, and its name in
the list. To get the UUIDs of all the vaults type <span class="docutils literal"><span class="pre">op</span> <span class="pre">list</span> <span class="pre">vaults</span></span> in your
CLI.</p>
<p>Afterwards you can unlock your Ansible Vault with 1Password by calling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span/><span class="n">ansible</span><span class="o">-</span><span class="n">playbook</span> <span class="o">--</span><span class="n">vault</span><span class="o">-</span><span class="n">password</span><span class="o">-</span><span class="n">file</span><span class="o">=/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">op</span><span class="o">-</span><span class="n">vault</span> <span class="o">-</span><span class="n">i</span> <span class="n">inventory</span> <span class="n">your_playbook</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>This now only works in the current terminal/shell, when you called <span class="docutils literal"><span class="pre">op-signin</span></span> before to enter password and 2 factor token.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/deployment.html">Deployment</a>
                 / 
                <a href="tags/devops.html">DevOps</a>
                 / 
                <a href="tags/ansible.html">Ansible</a>
                 / 
                <a href="tags/automation.html">Automation</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on January 05, 2019
                 by Benjamin Eberlei
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2018/10/28/unslacking_tideways_company.html">Unslacking Tideways Company</a></h1>
<p>We have moved away from Slack at <a class="reference external" href="https://tideways.com">Tideways</a> over the
last three months, because I found Slack is already annoying, even with just a
four person team (plus the occasional freelancer). For me, it disrupts deep
work phases and knowledge lost in the depth of chat history.</p>
<p>As an engineer, I have learned to be productive when I have a quiet space and
can tinker on a problem without getting interrupted. Slack makes this very
difficult and at least for me, is a primary cause of anxiety and fear of
missing out (FOMO).</p>
<p>While at first sight it seems chat is asynchronous it really is not.</p>
<ol class="arabic simple">
<li>If you wait for a long time to reply to a message on chat, then the
discussion thread is already spread in the history of the chat room and
messages back and forth interleaved with many additional messages that are
not related is not helpful.</li>
<li>In addition chats online status indicators exist just so that you know
if someone can answer any question directly, increasing communication
anxiety.</li>
<li>If you set yourself into some kind of do not disturb mode or mute a channel,
then its easy to miss important conversations and get left out of
discussions or decisions. Reading up on long conversations you have missed
is hard with chat tools.</li>
<li>By also sending Github commit messages, OpsGenie and Tideways alerts,
excerpts of HelpScout ticket updates and other “events” of the business into
Slack through various integrations we made Slack the primary tool to check
if <strong>anything</strong> is going on. While it is important to see what is going on,
this almost never has to happen in realtime and by connecting it to the
chat, we excuberated the previous points and everyone is checking chat even
more frequently.</li>
</ol>
<p>Jason Fried summed it up much better than I could <a class="reference external" href="https://m.signalvnoise.com/is-group-chat-making-you-sweat-744659addf7d">in this blog post</a>.</p>
<p>We are now using Github (issues and pull requests) and Basecamp (Messages,
Todolists) to replace Slack. Both tools allow us to have context sensitive,
asynchronous discussions on specific topics.</p>
<p>Since work never happens in a vacuum, I would be happy to have only a
single realtime notification tool (OpsGenie/PagerDuty) that sends notifications
to poeple currently on-call, and only about problems that require realtime
attention. Everything else, including chat, can be part of a daily summary
e-mail or screen.</p>
<p>My ultimate goal is to get longer stretches of uninterrupted time to work on
features, customer support or operational issues. Under time pressure the last
3 years I realized that productive and concentrated tinkering on projects is my
number one driver of happiness at work. I consider this a primary value of my
company, and it takes work and distance to the current status quo to make it
happen.</p>
<p>If you want to follow up on this ideas on your own, I can recommend the books
<a class="reference external" href="http://calnewport.com/books/deep-work/">Deep Work</a> by Cal Newport, <a class="reference external" href="https://zenfounder.com/products/entrepreneurs-guide-keeping-st-together/&quot;">The
Entrepreneur’s Guide to Keeping Your Sh*t Together</a>
by Sherry Walling and <a class="reference external" href="https://basecamp.com/books/calm">It doesn’t have to be crazy at work</a> by Jason Fried and David Heinemeier
Hansson.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/bootstrapping.html">Bootstrapping</a>
                 / 
                <a href="tags/deepwork.html">DeepWork</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on October 28, 2018
                 by Benjamin Eberlei
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2018/10/20/how_we_paid_the_hidden_costs_of_bootstrapping_tideways.html">How we paid the hidden costs of bootstrapping Tideways</a></h1>
<p>Justin Jackson started an extremely interesting discussion about the
<a class="reference external" href="https://justinjackson.ca/bootstrap-reality/">Bootstrappers paradox</a> and the
<a class="reference external" href="https://justinjackson.ca/cost/">hidden costs of bootstrapping</a> with <a class="reference external" href="https://saas.transistor.fm/episodes/your-revenue-forecast-is-wrong">replies
from many others</a>.</p>
<p>In this series of posts (there are more) he is discussing how hard
bootstrapping a SaaS business is in the first few years, when you are
essentially investing a lot of personal time and money until you can finally
get a return on this investment and pay yourself a decent salary.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span/>All bootstrappers have to deal with the same tension: can I get this to
scale, while paying my bills, without burning out?
</pre></div>
</div>
<p>This is something I am thinking about a lot to understand the journey and
history of Tideways and by writing about my thoughts I can share my
unconventional route for “bootstrapping” a SaaS.</p>
<p>In his post Jason projects the growth to sustainable $ 20.000 Monthly
Reccurring Revenue (MRR) to take 5 years, which is much too long for my taste.
We projected to reach 20.000€ MRR (~ $23.000) after three years, and missing
this target would probably have meant a re-evaluation, maybe even shutdown or
sale of Tideways.</p>
<p>We reached this goal this summer, after almost exactly three years.</p>
<p>What went into funding Tideways instead of money?</p>
<ul class="simple">
<li>I was able to invest 50+ hours/week and live on 50-75% of my previous salary
for two years only because I don’t have credits to pay; my wife and I don’t
have kids, no cars and no other large monthly expenses. We saved up a lot of
money that we partially invested into the company and partially used for
personal expenses during the first two years. Trading your own personal time
for bootstrapping a business is probably the largest, most hidden cost and
I for myself am pretty sure that I am never going to do this again.</li>
<li>My then employer <a class="reference external" href="https://qafoo.com">Qafoo</a> allowed me to work on Tideways
a few days per month and invested a lot of their own time after we decided to
found a company together and test product market fit. In return they now
own shares of the business.</li>
<li>We struck a deal with our first business partner <a class="reference external" href="https://syseleven.de">SysEleven</a> to trade hosting for Tideways in return for highly
discounted licenses for almost all their customers. This helped us with the
large four-digit monthly hosting costs that we had from day one, because as a
monitoring company you need more servers than other SaaS, In return for
investing in us, they now have us as a happy paying customer and they still
get a good deal on licenses for their customers.</li>
<li>With over 7000 Twitter followers from my <a class="reference external" href="https://www.doctrine-project.org">Doctrine</a> open source project days and my reach
within the European and German PHP community I accidentily already built a
large audience that would be potential customers for Tideways. We didn’t need
to invest more time into building an audience and we luckily never had to pay
for customer acquisition. However realistically I invested hundreds of unpaid
hours into my open source work since 2009 that allowed me to build this
audience.</li>
</ul>
<p>I consider points 2 &amp; 3 “unconventional” ways for bootstrapping Tideways and
already having an audience (4) as a very long term investment that I didn’t
plan and got lucky with.</p>
<p>Roughly summing up these investments now, they amount to costs of around
400.000-500.000€ that Tideways would have required funding for.</p>
<p>Maybe raising 500.000€ would be possible in hindsight, but without previous
founding experience and no connections to investors, I don’t know if I would
have succeeded.</p>
<p>I consider our approach similar to <a class="reference external" href="https://rsvp.customer.io/bootstrapping-vs-vc-funded-youre-asking-the-wrong-question-926167386374">Fundstrapping</a>
but instead of money you raise freedom, time and resources from your investors.</p>
<p>Most specifically my advice is to find strategic early business parterns that
either become your first large customer from day one, or make your product
available to their large customer base.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/bootstrapping.html">Bootstrapping</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on October 20, 2018
                 by Benjamin Eberlei
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2018/09/24/proofing_the_pythagorean_theorem_and_what_this_means_for_domain_driven_design.html">Proofing the Pythagorean theorem and what this means for Domain-Driven Design</a></h1>
<p>According to Wikipedia the <a class="reference external" href="https://en.wikipedia.org/wiki/Pythagorean_theorem#Other_proofs_of_the_theorem">Pythagoraen theorem</a>
is the theorem with the highest number of known proofs, citing a book
containing over 370 of them.</p>
<p>What does this mean for modelling under the Domain-Driven Design paradigm?</p>
<p>In discussions with other developers I often hear the opinion, that you should
develop the model of a software entirely disconnected from technical decisions
as long as possible and fully abstracted from the choices.</p>
<p>I held this opinion myself for a long time.</p>
<p>Discussing this with a colleague today I found a nice analogy to describe my
growing pain with this approach, something I wasn’t able to formulate before.</p>
<p>Maybe the analogy is a bit of a stretch.</p>
<p>The Pythagoraen theorem shows that you can find an entirely different solution
for the same problem by using a different toolbox. Finding one or more proofs
for the theorem depends on your knowledge of different fields of mathematics.
And depending on the toolbox, the solution is simple and elegant, or complex
and theoretical.</p>
<p>The reverse conclusion could be, that if you develop a model (theorem) entirely
abstracted from the future implementation and toolbox, then it must increase in
generality and complexity to take into account the potential implementation
with any kind of toolbox. Or the problem space is simple like the Pythagoraen
theorem that its description allows many implementations.</p>
<p>Consequently, if you make technical decisions and restrict yourself to fewer
approaches/toolboxes before building the model, then the resulting model can be
simpler under the assumption that you only need it to be solved under the given
technical constraints.</p>
<p>For example, take Redis as a choice of database. Its built in support for more
complex data-types allows to implement extremely simple abstractions directly
on top of Redis. If you know you use Redis up front for a problem that can be
solved with lists, sets or maps, then the model and code describing this domain
logic could be extremely simplified compared a solution that makes no
assumptions about the data storage.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/domaindrivendesign.html">DomainDrivenDesign</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on September 24, 2018
                 by Benjamin Eberlei
            </small>
        </p>
    </div>
        </div><div class="separator post_separator"></div><div class="section">
            <h1><a href="2017/07/29/hide_slack_unread_and_highlight_tray_icon_on_ubuntu_linux.html">Hide Slack unread and highlight Tray Icon on Ubuntu/Linux</a></h1>
<p>The Slack Ubuntu/Linux application doesn’t provide a way to disable the tray
icon and that means the unread or highlight notification bubbles will distract
you whenever somebody writes something in ANY channel that you are in, even
when the messages are not even interesting for you.</p>
<p>I wrote to Slack support to make a feature request and they suggested to make
clever use of an upstream Electron bug that makes the tray icon disappear in
17.04 as a workaround. This gave me the idea for a  more stable workaround.</p>
<p>I poked around in the list of files of the <cite>slack-desktop</cite> package and found
out that you can just exchange the files for the tray icons , so that the Slack
app is fooled into thinking it is showing the unread or highlight icons.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span/><span class="n">sudo</span> <span class="o">-</span><span class="n">i</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">slack</span><span class="o">/</span><span class="n">resources</span><span class="o">/</span><span class="n">app</span><span class="o">.</span><span class="n">asar</span><span class="o">.</span><span class="n">unpacked</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">static</span>
<span class="n">mv</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">highlight</span><span class="o">.</span><span class="n">png</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">highlight</span><span class="o">-</span><span class="n">backup</span><span class="o">.</span><span class="n">png</span>
<span class="n">mv</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">unread</span><span class="o">.</span><span class="n">png</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">unread</span><span class="o">-</span><span class="n">backup</span><span class="o">.</span><span class="n">png</span>
<span class="n">cp</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">rest</span><span class="o">.</span><span class="n">png</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">highlight</span><span class="o">.</span><span class="n">png</span>
<span class="n">cp</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">rest</span><span class="o">.</span><span class="n">png</span> <span class="n">slack</span><span class="o">-</span><span class="n">taskbar</span><span class="o">-</span><span class="n">unread</span><span class="o">.</span><span class="n">png</span>
</pre></div>
</div>
<p>Since I probably need to re-run this after every update to the Slack app, I
packed this into a shell script <cite>slack-quiet</cite>.</p>


            
            <div class="tags">
                More about: 
                <a href="tags/deepwork.html">DeepWork</a>
                
                
            </div>
            

            <div class="metadata">
        <p>
            <small>
                Posted on July 29, 2017
                 by Benjamin Eberlei
            </small>
        </p>
    </div>
        </div><div class="archive_link">
        <a href="archive.html">Archive</a>
    </div></article></div> <!-- #main -->
				</div>
			</div></div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo">
			<div class="container">
				<div class="col-md-8 col-md-offset-2">
					<div class="footer">
						<small>© Copyright 2008-2018, Benjamin Eberlei.</small>
					</div>
				</div>
			</div>
        </div> <!-- footer-container -->
      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-32146757-1', 'auto');
          ga('send', 'pageview');
        </script>

    </body>
</html>
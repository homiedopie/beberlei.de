<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="My blog">
        <meta name="viewport" content="width=device-width">
        <title>Benchmark and Optimize Zend Framework Performance &mdash; beberlei.de</title>
<meta name="google-site-verification" content="mycr8JCbLYq9QcOyh4Ub1esAdN-awH9ut6nyTKUTgE4" />
<meta content="width=device-width" />
<link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
<link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="../../../_static/blog.css" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">

        <link rel="shortcut icon" href="../../../_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="../../../_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../../_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="../../../_static/plugins.js"></script>
        <script src="../../../_static/main.js"></script>
        <link rel="next" title="ZendX_JQuery is Ready for Recommendation" href="../16/zendx-jquery-is-ready-for-recommendation.html" /><link rel="prev" title="Zend Helper for jQuery UI Widgets Demo" href="../22/zend-helper-for-jquery-ui-widgets-demo.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="../../../_static/underscore.js"></script><script type="text/javascript" src="../../../_static/doctools.js"></script><script type="text/javascript" src="../../../_static/disqus.js"></script><script type="text/javascript" src="../../../_static/ga.js"></script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container">
<nav class="navbar navbar-dark">
  <div class="container">
      <div class="navbar-header">
          <a class="navbar-brand" href="https://beberlei.de">Benjamin Eberlei</a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
              <li><a href="../../../index.html">Home</a></li>
              <li><a href="../../../pages/about.html">About</a></li>
              <li><a href="/archive.html">Archive</a></li>
              <li><a href="/rss.xml">RSS</a></li>
          </ul>
      </div>
  </div>
</nav>

<div class="main-container" role="main">
<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2 col-sm-12">
          <div id="2008-08-28-benchmark-and-optimize-zend-framework-performance">
            
            
<div class="blog-post">
    <div class="section" id="benchmark-and-optimize-zend-framework-performance">
<h1>Benchmark and Optimize Zend Framework Performance</h1>
<p>In the fall of <a class="reference external" href="http://talks.php.net/show/froscon08">Rasmus presentation (Simple is
Hard)</a> on
<a class="reference external" href="http://www.froscon.org">FrOSCon</a> I tried to optimize <a class="reference external" href="http://framework.zend.com">Zend
Frameworks</a> performance a little bit. There
has also been a little discussion on the Zend Framework Mailing List on
this topic.</p>
<p>I haven&#8217;t changed great parts of the code or anything, I just
benchmarked how different global include strategies affect the overall
performance of my blog software written with help of the ZF. The
following include strategies were tested (I&#8217;ve used the Zend Framework
1.6 RC2 package for all of them):</p>
<ol class="arabic simple">
<li>Zend_Loader Autoload, Default PHP Include Path</li>
<li>Zend_Loader Autoload, Swapped Include Path</li>
<li>ZF 1.6 RC2 stripped from all <strong>&#8220;require_once&#8221;</strong> dependencies,
Zend_Loader Autoload, Swapped Include Path</li>
<li>ZF 1.6 RC2 stripped from all <strong>&#8220;require_once&#8221;</strong> dependencies, no
autoload, used <a class="reference external" href="http://pecl.php.net/package/inclued">inclued</a> to
find file dependencies and require (not _once) them all on startup.</li>
</ol>
<p>To strip all the require_once from the Zend Framework source code, i
built a little script to do that for me. For the last test I wrote a
little script that used the <strong>inclued_get_data()</strong> function to built a
correct dependency tree for all includes. I have put each configuration
of my Zend Framework install 30 seconds under siege with 5 concurrent
requests. I have rerun all tests with APC and without APC.</p>
<div class="section" id="results-without-apc">
<h2>Results without APC</h2>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="21%" />
<col width="16%" />
<col width="21%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Include Strategy</td>
<td>Response time</td>
<td>Trans/sec</td>
<td>Performance %</td>
</tr>
<tr class="row-even"><td>Autoload, default include path</td>
<td>0.20</td>
<td>24.65</td>
<td>100%</td>
</tr>
<tr class="row-odd"><td>Autoload, swapped include path</td>
<td>0.19</td>
<td>26.83</td>
<td>95%</td>
</tr>
<tr class="row-even"><td>Autoload, ZF w/o require_once</td>
<td>0.17</td>
<td>29.27</td>
<td>85%</td>
</tr>
<tr class="row-odd"><td>No-Autoload, require up front</td>
<td>0.16</td>
<td>31.82</td>
<td>80%</td>
</tr>
</tbody>
</table>
<p>You can see that each step makes a ZF application run faster and that
the full optimization with requiring all scripts up front is about 20%
faster than the default configuration.</p>
</div>
<div class="section" id="results-with-apc">
<h2>Results with APC</h2>
<table border="1" class="docutils">
<colgroup>
<col width="42%" />
<col width="21%" />
<col width="16%" />
<col width="21%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Include Strategy</td>
<td>Response time</td>
<td>Trans/sec</td>
<td>Performance %</td>
</tr>
<tr class="row-even"><td>Autoload, default include path</td>
<td>0.11</td>
<td>45.76</td>
<td>100%</td>
</tr>
<tr class="row-odd"><td>Autoload, swapped include path</td>
<td>0.09</td>
<td>53.05</td>
<td>81,81%</td>
</tr>
<tr class="row-even"><td>Autoload, ZF w/o require_once</td>
<td>0.08</td>
<td>60.90</td>
<td>72,72%</td>
</tr>
<tr class="row-odd"><td>No-Autoload, require up front</td>
<td>0.07</td>
<td>73.99</td>
<td>63,63%</td>
</tr>
</tbody>
</table>
<p>Turning APC on gives a boost of about 50% to your application no matter
what include strategy you are following (so there is excuse not using
APC). But switching between different include strategies still makes a
huge difference in performance. Percentage-wise this is a larger
difference than without APC. Requiring all dependent scripts up front
takes only about 63% of the default configuration time, which can make a
major difference on any production server.</p>
<p>In an application knowing which includes of the Zend Framework will be
needed on each request is difficult, since different helpers and classes
might be needed based on which url is requested. It maybe a good
practice to just include all the classes that might be needed. If this
is a job to hard to do you can still get lots of performance gain out of
your application by fixing the include path, using Zend Loaders Autoload
and stripping all require_once calls from all of the Zend Framework
files.</p>
</div>
</div>


    <div class="tags">
            <strong>More about:</strong>
            <a href="../../../tags/zendframework.html">ZendFramework</a>
                
            </span>
        </div><p class="metadata"><small>Posted on August 28, 2008</small></p>

    
    

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'whitewashing';
        var disqus_url = 'http://www.whitewashing.de/2008/08/28/benchmark-and-optimize-zend-framework-performance.html';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    
</div>

          </div>         
        </div>
    </div>
</div>
</div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo">
<div class="container">
    <div class="col-md-8 col-md-offset-2">
        <div class="footer">
            <small>&copy; Copyright 2008-2017, Benjamin Eberlei.</small>

            
        </div>
    </div>
</div>
</div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>
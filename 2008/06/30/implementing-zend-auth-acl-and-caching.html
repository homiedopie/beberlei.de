<!DOCTYPE html><!--[if lt IE 7]>      <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:og="http://ogp.me/ns#"
    xmlns:fb="https://www.facebook.com/2008/fbml" class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="description" content="My blog">
        <meta name="viewport" content="width=device-width">
        <title>Implementing Zend Auth, Acl and Caching &mdash; beberlei.de</title>
<meta name="google-site-verification" content="mycr8JCbLYq9QcOyh4Ub1esAdN-awH9ut6nyTKUTgE4" />
<meta content="width=device-width" />
<link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
<link rel="stylesheet" href="../../../_static/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="../../../_static/blog.css" type="text/css" />
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">

        <link rel="shortcut icon" href="../../../_static/tinkerer.ico" /><!-- Load modernizr and JQuery -->
        <script src="../../../_static/vendor/modernizr-2.6.2.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="../../../_static/vendor/jquery-1.8.2.min.js"><\/script>')</script>
        <script src="../../../_static/plugins.js"></script>
        <script src="../../../_static/main.js"></script>
        <link rel="next" title="Exim4 and Virtual Users .forward Files" href="../14/exim4-and-virtual-users-forward-files.html" /><link rel="prev" title="Zend_Form - Rapid Development Plugin for Eclipse?" href="../../05/07/zend-form-rapid-development-plugin-for-eclipse.html" /><link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.html" /><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><script type="text/javascript" src="../../../_static/underscore.js"></script><script type="text/javascript" src="../../../_static/doctools.js"></script><script type="text/javascript" src="../../../_static/disqus.js"></script><script type="text/javascript" src="../../../_static/ga.js"></script></head>
    <body role="document">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

      <div id="container">
<nav class="navbar navbar-dark">
  <div class="container">
      <div class="navbar-header">
          <a class="navbar-brand" href="https://beberlei.de">Benjamin Eberlei</a>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
              <li><a href="../../../index.html">Home</a></li>
              <li><a href="../../../pages/about.html">About</a></li>
              <li><a href="/archive.html">Archive</a></li>
              <li><a href="/rss.xml">RSS</a></li>
          </ul>
      </div>
  </div>
</nav>

<div class="main-container" role="main">
<div class="container">
    <div class="row">
        <div class="col-md-8 col-md-offset-2 col-sm-12">
          <div id="2008-06-30-implementing-zend-auth-acl-and-caching">
            
            
<div class="blog-post">
    <div class="section" id="implementing-zend-auth-acl-and-caching">
<h1>Implementing Zend Auth, Acl and Caching</h1>
<p>I managed to work a bit on the blog, enabling me to have new instance in
the series, How to refactor and extend your own blog software using
<a class="reference external" href="http://framework.zend.com">Zend Framework</a>. This time: Implementing
meaningful Auth and ACL mechanisms and <a class="reference external" href="http://www.whitewashing.de/blog/articles/41">fixing view
caching</a>, which did not
work in its original implementation due to different users groups
sharing the same cached views.</p>
<p>In the last days I came across two in depth tutorials on Zend_Acl and
Zend_Auth integration to MVC. Most people probably saw the DevZone
article &#8220;<a class="reference external" href="http://devzone.zend.com/article/3509-Zend_Acl-and-MVC-Integration-Part-I-Basic-Use">Zend_Acl and MVC Integration (part
1)</a>&#8221;
by Aldemar Bernal on the Frameworks Frontpage. Another good article was
written by Frank Ruske in the latest german <a class="reference external" href="http://www.phpmagazin.de">PHP
Magazin</a> (<a class="reference external" href="http://it-republik.de/zonen/magazine/ausgaben/psfile/source_file/14/Seite_80__482a98c572a5c.zip">Zipped Source Code of the
Example</a>).
I took the best ideas of both articles and merged them into the existing
components of my blog.</p>
<p>This now enables me to cache the site depending on the Auth status of
the page user agent. The blog is now caching all views that are
generated for guest users. Since there is no &#8220;registered&#8221; or &#8220;member&#8221;
account yet, this means the blogs content is cached and served from
cache for everyone except me when I am logged in. To get this work I
added some simple additional check in <a class="reference external" href="http://devzone.zend.com/article/3372-Front-Controller-Plugins-in-Zend-Framework">Matthews Cache View Controller
Plugin</a>:</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre>public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request)
{
    $auth = Zend_Auth::getInstance();
    if($auth-&gt;hasIdentity()) {
        self::$doNotCache = true;
        return;
    }
    [..]
}
</pre></div>
</div>
</div></blockquote>
<p>This prevents caching for registered identities.</p>
</div>


    <div class="tags">
            <strong>More about:</strong>
            <a href="../../../tags/zendframework.html">ZendFramework</a>
                
            </span>
        </div><p class="metadata"><small>Posted on June 30, 2008</small></p>

    
    

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'whitewashing';
        var disqus_url = 'http://www.whitewashing.de/2008/06/30/implementing-zend-auth-acl-and-caching.html';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
    
</div>

          </div>         
        </div>
    </div>
</div>
</div> <!-- #main-container -->

        <div class="footer-container" role="contentinfo">
<div class="container">
    <div class="col-md-8 col-md-offset-2">
        <div class="footer">
            <small>&copy; Copyright 2008-2017, Benjamin Eberlei.</small>

            
        </div>
    </div>
</div>
</div> <!-- footer-container -->

      </div> <!--! end of #container --><!--[if lt IE 7 ]>
          <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
          <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
        <![endif]-->
    </body>
</html>